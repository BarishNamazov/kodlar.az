---
import Icon from "./Icon.astro";

interface Props {
  href?: string;
  variant?: "default" | "primary" | "youtube";
  size?: "sm" | "md";
  icon?: string;
  iconSize?: number;
  class?: string;
  target?: string;
  rel?: string;
  type?: "button" | "submit" | "reset";
}

const {
  href,
  variant = "default",
  size = "md",
  icon,
  iconSize = 16,
  class: className = "",
  target,
  rel,
  type = "button",
} = Astro.props;

const Tag = href ? "a" : "button";
---

<Tag
  href={href}
  class:list={["btn", `btn--${variant}`, `btn--${size}`, className]}
  target={target}
  rel={rel}
  type={!href ? type : undefined}
>
  {icon && <Icon name={icon} size={iconSize} />}
  <slot />
</Tag>

<style>
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--font-mono);
    background: var(--color-surface);
    color: var(--color-text-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    text-decoration: none;
    transition: all var(--transition-fast);
    cursor: pointer;
  }

  .btn:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  /* Sizes */
  .btn--sm {
    padding: 0.375rem 0.625rem;
    font-size: 0.6875rem;
  }

  .btn--md {
    padding: 0.5rem 0.875rem;
    font-size: 0.75rem;
  }

  /* Variants */
  .btn--primary {
    background: var(--color-primary-muted);
    color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .btn--primary:hover {
    background: var(--color-primary);
    color: var(--color-bg);
  }

  .btn--youtube {
    background: var(--color-red-muted);
    color: var(--color-red);
    border-color: transparent;
  }

  .btn--youtube:hover {
    background: var(--color-red);
    color: white;
    border-color: var(--color-red);
  }
</style>
